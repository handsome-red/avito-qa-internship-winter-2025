# Отчет о найденных багах в API микросервиса объявлений

## Сводная таблица багов

| ID | Название бага | Тест-кейсы | Серьезность |
|----|---------------|------------|-------------|
| BUG-001 | Отрицательные значения принимаются в числовых полях | TC-015, TC-016 | High |
| BUG-002 | Нулевые значения статистики не принимаются | TC-017 | High |
| BUG-003 | Отсутствие валидации sellerID (нижняя граница) | TC-030 | High |
| BUG-004 | Невалидный формат ID возвращает 404 вместо 400 | TC-024 | Medium |
| BUG-005 | Несоответствие формата ответа POST запроса | TC-001 | Low |
| BUG-006 | Несогласованность именования полей (sellerID/sellerId) | TC-018 | Low |
| BUG-007 | Несоответствие HTTP статусов в ответах | TC-036 | Low |

---

## Подробное описание багов

### BUG-001: Отрицательные значения принимаются в числовых полях

**Серьезность** High
**Тест-кейсы:** TC-015, TC-016  
**Описание:** API принимает отрицательные значения в полях `price`, `likes`, `viewCount`, `contacts`  

**Шаги воспроизведения:**
1. Отправить POST запрос на `/api/1/item` с отрицательным значением в поле `price`
2. Отправить POST запрос на `/api/1/item` с отрицательными значениями в полях `statistics`

**Ожидаемый результат:** Статус 400 с сообщением об ошибке валидации  
**Фактический результат:** Статус 200, объявление создается с некорректными данными  
**Влияние:** Нарушение бизнес-логики  
**Дополнительно:** Баг воспроизводится стабильно

---

### BUG-002: Нулевые значения статистики не принимаются

**Серьезность** High
**Тест-кейсы:** TC-017  
**Описание:** API возвращает 400 при попытке создать объявление с нулевыми значениями в `statistics`  

**Шаги воспроизведения:**
1. Отправить POST запрос на `/api/1/item` с `statistics: {"likes": 0, "viewCount": 0, "contacts": 0}`

**Ожидаемый результат:** Статус 200, новое объявление может иметь нулевую статистику  
**Фактический результат:** Статус 400 с сообщением об ошибке  
**Влияние:** Невозможно создать объявление с нулевой статистикой, что нелогично для новых объявлений  
**Дополнительно:** Противоречит здравому смыслу - новое объявление должно начинать с нулевой статистики

---

### BUG-003: Отсутствие валидации sellerID (нижняя граница)

**Тест-кейсы:** TC-030  
**Описание:** API не валидирует нижнюю границу sellerID 

**Шаги воспроизведения:**
1. Отправить GET запрос на `/api/1/-1/item` (отрицательный sellerID)

**Ожидаемый результат:** Статус 400 (значение вне допустимого диапазона)  
**Фактический результат:** Статус 200 с пустым массивом  
**Влияние:** Нарушение бизнес-правил

---

### BUG-004: Невалидный формат ID возвращает 404 вместо 400

**Тест-кейсы:** TC-024  
**Описание:** API возвращает 404 для невалидного формата ID вместо 400  

**Шаги воспроизведения:**
1. Отправить GET запрос на `/api/1/item/не-uuid-формат`

**Ожидаемый результат:** Статус 400 (Bad Request - невалидный формат)  
**Фактический результат:** Статус 404 (Not Found)  
**Влияние:** Затрудняет отладку, неясная ошибка для клиента   
**Дополнительно:** Баг также проявляется в других endpoint-ах с ID параметром

---

### BUG-005: Несоответствие формата ответа POST запроса

**Тест-кейсы:** TC-001  
**Описание:** POST запрос возвращает не тот формат, который указан в документации  

**Шаги воспроизведения:**
1. Отправить валидный POST запрос на `/api/1/item`
2. Проверить формат ответа

**Ожидаемый результат (по YAML):** Полный объект объявления с полями `id`, `sellerId`, `name`, `price`, `statistics`, `createdAt`  
**Фактический результат:** `{"status": "Сохранили объявление - <id>"}`  
**Влияние:** Несоответствие документации и реализации  
**Дополнительно:** Документация (YAML) противоречит реальному поведению API

---

### BUG-006: Несогласованность именования полей (sellerID/sellerId)

**Тест-кейсы:** TC-018  
**Описание:** Разное написание одного и того же поля в запросе и ответе  

**Шаги воспроизведения:**
1. Отправить POST запрос с полем `sellerID` (заглавная D)
2. Получить созданное объявление через GET запрос

**Ожидаемый результат:** Единообразное именование поля (`sellerId` или `sellerID`)  
**Фактический результат:** Запрос - `sellerID`, ответ - `sellerId`  
**Влияние:** Неконсистентный API  
**Дополнительно:** Нарушение принципов REST API дизайна

---

### BUG-007: Несоответствие HTTP статусов в ответах

**Тест-кейсы:** TC-036  
**Описание:** HTTP статус в заголовке ответа не соответствует статусу в теле ответа  

**Шаги воспроизведения:**
1. Отправить GET запрос на `/api/1/statistic/несуществующий-id`
2. Проверить статус код и тело ответа

**Ожидаемый результат:** Согласованные статусы (например, 404 в заголовке и `{"status": "404"}` в теле)  
**Фактический результат:** 404 в заголовке, `{"status": "400"}` в теле  
**Влияние:** Затрудняет обработку ошибок, неконсистентное поведение  
**Окружение:** Тестовое окружение  
**Дополнительно:** Проявляется в нескольких endpoint-ах

---

## Примечания

1. Все баги воспроизводятся в тестовом окружении `https://qa-internship.avito.com`
2. Тесты для обнаружения багов находятся в папке `Task2_1/`
3. Для каждого бага есть соответствующие тест-кейсы в файле `TESTCASE.md`
4. Баги обнаружены методом black-box тестирования без доступа к исходному коду